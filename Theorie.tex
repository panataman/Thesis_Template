\chapter{Theorie}
\label{chap:theorie}
\minitoc

Seit Ende des letzten Jahrhunderts herrscht in der Fachliteratur für Informatik
die Meinung, dass der Einsatz von objektorientierten Techniken Programme
hervorbringt, die im Vergleich \textit{einfacher erweiterbar, besser testbar}
und \textit{besser wartbar} sind\todo{SIND, das ist hier nicht gut.}. Dabei wird
ein Verfahren angewendet, nach dem große Systeme in kleinere Teile des Ganzen
zerlegt werden. Programme lassen sich dann im Allgemeinen mit weniger Aufwand und
kleineren Fehlerwahrscheinlichkeit programmieren.  Inspiriert durch die Vorgänge
aus der realen Welt, werden die Abläufe durch operierende Objekte vorgestellt,
die Aufträge erledigen und vergeben können. Die objektorientierte
Programmierung, die im folgenden Text mit OOP\abvz{OOP}{objektorientierte
Programmierung} abgek\"urzt wird, erm\"oglicht die Lösung von Problemen durch
ein Gefecht kooperierender Objekte.

\vspace{0.3cm} \noindent Die wesentlichen Eigenschaften der OOP sind:
\begin{description}
	\item[Datenkapselung] Der Zugriff auf Attribute einer Klasse erfolgt
	gew\"ohnlich durch ihre Methoden, die Kommunikationsschnittstellen
	darstellen. Dieses Verfahren bezeichnet man Datenkapselung.
	\item[Polymorphie] Wenn einem Objekt einer bestimmten Klasse die
	Objektvariablen einer anderen Klasse zugewiesen werden k\"onnen, spricht
	man von Polymorphie.
	\item[Vererbung] was ist das?
\end{description}
\footnote{ Ausführliche Informationen dazu findet man z.B. in
\cite{OOP},\cite{java} oder \cite{python}.}\todo{Das ist nicht ganz ok?}

\section{Objektorientierte Programmierung mit Matlab}

\subsection*{Klassen und Objekte in \matlab}

\begin{description}
	\item[\textbf{Klassen}] Eine Klasse ist ein Instrument der
	Programmierung zur Erfassung von charakteristischen Eigenschaften
	zusammenh\"angender Objekte. Die Definition der Strukturen der Objekte
	erfolgt durch Klassen.
\end{description}

\begin{lstlisting}[float=h,frame=noframe]
classdef Classname < Superclass
	...
end
\end{lstlisting}

\section{Kurze Einf\"urung in die Theorie der K\"altetechnik}

In diesem Kapitel wird ein knapper \"Uberblick über die mathematischen und
physikalischen Zusammenhänge, die bei der Entwicklung eines Modellsupermarktes
zwingend beachtet werden müssen, vorgestellt\todo{Der Satz ist total scheiße
man}. Es beinhaltet eine Zusammenfassung des mathematischen Konstruktes aus dem
Kapitel 3 der Diplomarbeit von Caroline Möller \cite{caro}, der bei der
Entwicklung des Programms zu Grunde gelegt wurde.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \section{Ausformuliertes Einfügen}

Die primäre Aufgabe der Kühleinheiten in einem Supermarkt besteht in der Regel
darin, Lebensmitteltemperatur unter die Zimmertemperatur zu bringen und diese
dabei zu halten\todo{Hört sich komisch an!}. Körper mit unterschiedlicher
Temperatur sind bestrebt, wenn sie thermisch von einander nicht vollkommen
isoliert sind, durch gegenseitige Wechselwirkung ihre Temperaturen anzugleichen,
sodass ein Wärmegleichgewicht entsteht, wobei der natürliche, selbständige
Wärmefluss immer von einem Körper mit höheren Temperatur in Richtung des Körpers
mit kleineren Temperatur stattfindet. Um eine negative Temperaturänderung
herzustellen und diese auch zu halten, muss die eindringende Wärmeenergie
ständig in der selben Höhe abgeführt werden, damit die Temperatur konstant
bleibt. Diese Energiemenge pro Zeiteinheit wird als Kälteleistung bezeichnet.
Eine Abweichung von dieser Menge führt zum Steigen der Temperatur, wenn weniger
und zum sinken der Temperatur wenn mehr abgeführt wird. Um diesen Kühlkreislauf
aufrecht zu erhalten, muss Leistung aufgewendet werden\footnote{ Eine
detailierte Beschreibung dieser Prozesse in einer Kopressionskälteanlage und
Spezifikation ist nicht Gegenstand dieser Arbeit.  Ausführliche Informationen
dazu findet man z.B.  in \cite{caro, doctor, TAB_A1}.}.

%\input{uml_sequence2}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \section{Überblick über die mathematische Zusammenhänge}

Das wird ausformuliert und mit einem Bild visualisiert\todo{bald schnell
machen}.
\begin{itemize}
	\item Temperaturunterschied in Kelvin $K$
	\item Wärmeausgleich (Verlust an Kälte)
	\item Kälteenergie gespeichert in Körpern mit einer bestimmten
	spezifischen Wärmekapazität
	\item Kälteenergie gespeichert in Masse
\end{itemize}
\begin{figure}\caption{ Modellgrundlage}
	\missingfigure{Modellgrundlage}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \subsection{Wermeverlustquellen bei Kühlgeräten}

Division der eindringenden Wärmeenergie mit dem Produkt aus Substanzmasse zur
Aufnahme der Wärmeenergie und der spezifischen Wärmekapazität dieser
Substanzmasse ergibt die Temperaturdifferenz $\Delta\:t$.

\begin{equation}
	\Delta\:t = \frac{Q}{m\cdot c}
\label{tdif}
\end{equation}

\begin{description}[\dth]

	\item[$\Delta\:t$] Temperaturdifferenz in Kelvin $K$
	\item[$Q$] Eindringende Wärmeenergie in $kJ$
	\item[$m$] Substanzmasse zur Aufnahme der Wärmeenergie in $kg$
	\item[$c$] Spezifische Wärmekapazität der Substanzmasse in $\frac{kJ}{kg
		\cdot K}$

\end{description}
\vspace{0.5cm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \subsection{Erforderliche Kälteleistung}

Die installierte Kälteleistung multipliziert mit der täglichen Betriebszeit muss
zwangsweise größer oder gleich dem stündlichen Kältebedarf multipliziert mit der
Tagesstundenzahl sein.

\begin{equation}
	\pinstall = \frac{24\,h}{ \tau_{B} }  \cdot \pkalt \label{pinstall}
\end{equation}

\begin{description}[\dth]

	\item[$\pinstall$] Installierte Kälteleistung in $kW$
	\item[$\tau_{B}$] Tägliche Betriebszeit in $h$
	\item[$\pkalt$] Kältebedarf in $kW$

\end{description}
\vspace{0.5cm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \subsection{Transmissionswärmeleistung}

Die Transmissionswärmeleistung wird aus der Multiplikation der Fläche
der wärmeübertragenden Wänd mit ihrem spezifischen Wärmedurchgangskoeffizient
und der Temperaturdifferenz zwischen der Kühlraumtemperatur und der
Umgebungstemperatur berechnet.

\begin{equation}
	\ptrans = A \cdot k \cdot \Delta t
	\label{ptrans}
\end{equation}

\begin{description}[\dth]

	\item[$\ptrans$] Transmissionswärmeleistung in $kW$
	\item[$A$] Fläche in $m^2$
	\item[$k$] Wärmedurchgangskoeffiziente in $\frac{W}{m^2 \cdot K}$
	\item[$\Delta\: t$] Temperaturdifferenz in $K$

\end{description}
\vspace{0.5cm}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \subsection{Leistungszahl}
% \label{Leistungszahl}

Der Zusammenhang zwischen der aufgewendeten elektrischen Antriebsleistung $P$
eines Verdichters in einer Kompressionskälteanlage und der genutzten
Kälteleistung ${\dot{Q}}_0$ wird durch die Kältezahl $\epsilon$ wiedergegeben.
Die Leistungszahl wird in die zweite Spalte im Array (vergl. Zeile 4 im
\matref{fridge}) eingetragen.

\begin{equation}
	\epsilon = \frac{\pkalt}{P}
\label{epsilon}
\end{equation}

\begin{description}[\dth]

	\item[$\epsilon$] Leistungszahl (einheitenlos)
	\item[$\pkalt$] Kälteleistungsbedarf in $kW$
	\item[$P$] elektrische Verdichterantriebsleistung in einer
		Kopressionskälteanlage in $kW$

\end{description}
\vspace{0.5cm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \subsection{Verbrauch abhängig von der Öffnungszeit}

Die Öffnungszeit des Supermarkts hat einen spürbaren Einfluss auf die Größe der
Wärmeverluste. In der Literatur wird der Nachtverbrauch mit $10\%$ bis $20\%$
des Tagesverbrauchs angegeben\cite{kauffeld}.  In der Nacht fallen keine
zusätzlichen Verluste zum Beispiel durch Licht, Körperwärme oder
Türöffnungszeiten, sodass nur Transmissionsverluste bei der Berechnung beachtet
werden.

\begin{equation}
	\dot{Q}_{Nacht}=\ptrans
\label{pnacht}
\end{equation}

\begin{description}[\dth]

	\item[$\pnacht$] Leistungsbedarf in der Nacht in $kW$
	\item[$\ptrans$] Transmissionswärmeleistung in $kW$

\end{description}
\vspace{0.5cm}


Der Leistungsbedarf am Tag ergibt sich aus der Summe des Tagesmehrbedarfs und
der Transmissionswärmeleistung. Aus Gründen der Vereinfachung wird
Tagesmehrbedarf als weitgehend konstant angenommen.

\begin{equation}
	\ptag = \pmehr + \ptrans
\label{ptag}
\end{equation}

\begin{description}[\dth]

	\item[$\ptag$] Leistungsbedarf am Tag in $kW$
	\item[$\pmehr$] Mehrbedarf am Tag in $kW$
	\item[$\ptrans$] Transmissionswärmeleistung in $kW$

\end{description}
\vspace{0.5cm}

Die Berechnung der mittleren Transmissionswärmeleistung erfolgt durch die
Multiplikation der Differenz zwischen der Umgebungstemperatur und der mittleren
Kühlraumtemperatur mit dem Wärmedurchgangskoeffizienten und der Fläche der
wärmeübertragenden Wände.

\begin{equation}
	\aptrans = A \cdot k \cdot \left( t_{amb} -
	\overline{t}_{KR} \right) \label{aptrans}
\end{equation}

\begin{description}[\dth]

	\item[$\aptrans$] mittlere Transmissionswärmeleistung in $kW$
	\item[$A$] Fläche in $m^2$
	\item[$k$] Wärmedurchgangskoeffiziente in $\frac{W}{m^2 \cdot K}$
	\item[$t_{amb}$] Umbgebungstemperatur in $^{\circ}C$
	\item[$\overline{t}_{KR}$] mittlere Kühlraumtemperatur in
		$^{\circ}C$
\end{description}
\vspace{0.5cm}

Ist f\"ur eine K\"alteanlage der K\"alteleistungsbedarf bekannt so wird der
Tagesmehrbedarf an K\"alteleistung ermittelt, indem vom Produkt des
K\"alteleistungsbarfes f\"ur $24\;h$ mit dem Faktor f\"ur
K\"altebedarfsabsenkung die mittlere Transmissionswärmeleistung abgezogen wird.

\begin{equation}
	\pmehr = \pkalt \cdot K - \aptrans
\label{pmehr}
\end{equation}

\begin{description}[\dth]

	\item[$\pmehr$] Mehrbedarf am Tag in $kW$
	\item[$\pkalt$] Kälteleistungsbedarf in $kW$
	\item[$K$] Faktor für Kältebedarfsabsenkung (einheitenlos)
	\item[$\aptrans$] mittlere Transmissionswärmeleistung in $kW$

\end{description}
\vspace{0.5cm}

Ist der Kälteleistungsbedarf nicht bekannt, wie zum Beispiel bei steckerfertigen
Geräten, kann der Mehrbedarf am Tag \"uber den Wert Verdichterarbeit pro 24
Stunden $\lverd$ für den gesamten Kälteverbraucher ermittelt werden.

Das Produkt aus dem spezifischen Energieverbrauch mit dem Faktor für
Kältebedarfsabsenkung, dem Verdichteranteil und der Anzahl der Geräte ergibt die
Verdichterarbeit.

\begin{equation}
	\lverd = \lspez \cdot K \cdot v \cdot n
\label{lverd}
\end{equation}

\begin{description}[\dth]

	\item[$\lverd$] Verdichterarbeit pro $24\,h$ in $\frac{kWh}{24h}$
	\item[$\lspez$] spezifischer Energieverbrauch pro $24\,h$ in
		$\frac{kWh}{24h}$
	\item[$K$] Faktor für Kältebedarfsabsenkung (einheitenlos)
	\item[$v$] Verdichteranteil (einheitenlos)
	\item[$n$] Anzahl der Geräte

\end{description}
\vspace{0.5cm}

Im Folgenden muss die Verdichterarbeit zum Abf\"uhren von zus\"atzlich
eindringenden W\"aremeenergie in der \"Offnungszeit berechnet werden, die einem
weiteren Schritt in W\"armeleistung $\pmehr$ umgewandelt wird.

\begin{equation}
	\lmehr = \lverd - \frac{\ptrans}{\epsilon} \cdot 24h
\label{lmehr}
\end{equation}

\begin{description}[\dth]

	\item[$\lmehr$] Verdichterarbeit zum Abführen von eindringenden
		Wärmeenergie $\emehr$ in $kWh$ in der \"Offnungszeit
	\item[$\lverd$] Verdichterarbeit pro $24\,h$ in $\frac{kWh}{24h}$
	\item[$\ptrans$] Transmissionswärmeleistung in $kW$
	\item[$\epsilon$] Leistungszahl (einheitenlos)

\end{description}
\vspace{0.5cm}

Die Umrechnung von $\lmehr$ in $\pmehr$ erfolgt mit Hilfe der Leistungszahl
$\epsilon$. Die Verdichterarbeit $\lmehr$ wird mit $\epsilon$ multipliziert.
Es wird angenommen, dass der Mehrbedarf in den rund zw\"olf Stunden der
\"Offnungszeit einf\"a

\begin{equation}
	\pmehr = \frac{\lmehr}{12h} \cdot \epsilon
\label{<++>}
\end{equation}

\begin{description}[\dth]

	\item[$\pmehr$] Mehrbedarf am Tag in $kW$
	\item[$\lmehr$] Verdichterarbeit zum Abführen von eindringenden
		Wärmeenergie $\emehr$ in $kWh$ in der \"Offnungszeit
	\item[$\epsilon$] Leistungszahl (einheitenlos)

\end{description}
\vspace{0.5cm}
berechnen.

Dabei entspricht $\pnacht$ der mittleren Transmissionswärmeleistung $\ptrans$.
$\ptag$ ist der Kältebedarf $\pkalt$, multipliziert mit dem Faktor für die
Kältebedarfsabsenkung $K$ bei Geräten, bei denen der Kältebedarf gegeben ist.
Bei steckerfertigen Geräten ist $\ptag$ die Summe aus dem Mehrbedarf an Leistung
am Tag $\pmehr$ und der mittleren Transmissionswärmeleistung $\ptrans$.

%\subsection{Berechnung der Temperaturänderung}
Mit den Wärmeverlusten, die am Tag und in der Nacht in unterschiedlicher Größe
auftreten, wird für jeden Zeitschritt die Zeit bis zum kritischen
Temperaturmaximum bestimmt. Diese Zeit braucht das Programm, um den Einsatz der
Supermarktkälteanlagen als Speicher zu planen. Mit der Gleichung
\begin{equation}
	\tau_{krit}(i) = \frac{m \cdot c \cdot (t_{max} -
		t(i))}{\aptranslog}
\label{taukn}
\end{equation}

\begin{description}[\dth]

	\item[$\tau_{krit}$] Zeit bis zur kritischen Temperatur in $h$
	\item[$m$] Substanzmasse zur Aufnahme der Wärmeenergie in $kg$
	\item[$c$] Spezifische Wärmekapazität der Substanzmasse in $\frac{kJ}{kg
		\cdot K}$
	\item[$t_{max}$] obere Temperaturgrenze in $ ^{\circ} C $
	\item[$t(i)$] Temperatur zur Stunde $i$ in $ ^{\circ} C $
	\item[$\aptranslog$] logrithmierte Mittelwert der
		Transmissionswärmeleistung in $kW$|
\end{description}
\vspace{0.5cm}


wird die Zeit $\tau_{krit}$ für jeden Zeitpunkt $i$ berechnet, wobei
$\overline{\dot{Q}}_{Tr_{ln}}$ der logarithmische Mittelwert ist, der sich aus
den Transmissionswärmeleistungen zum jeweils aktuellen Zeitpunkt $i$ mit der
Temperatur $t(i)$ und den Transmissionswärmeleistungen zum Zeitpunkt, an dem der
Kühlinnenraum die maximale Temperatur $t_{max}$ erreicht hätte, berechnet. Am
Tag müssen die restlichen Verluste $\pmehr$ zusätzlich zu den
Transmissionwärmeverlusten für die Berechnung der Zeit bis zur kritischen
Temperatur berücksichtigt werden, wodurch sich folgende Gleichung ergibt:

\begin{equation}
	\tau_{krit}(i) = \frac{m \cdot c \cdot (t_{max} -
		t(i))}{{\overline{\dot{Q}}_{Tr_{ln}}} + \pmehr}
\label{taukd}
\end{equation}

\begin{description}[\dth]

	\item[$\tau_{krit}$] Zeit bis zur kritischen Temperatur in $h$
	\item[$m$] Substanzmasse zur Aufnahme der Wärmeenergie in $kg$
	\item[$c$] Spezifische Wärmekapazität der Substanzmasse in $\frac{kJ}{kg
		\cdot K}$
	\item[$t_{max}$] obere Temperaturgrenze in $ ^{\circ} C $
	\item[$t(i)$] Temperatur zur Stunde $i$ in $ ^{\circ} C $
	\item[$\aptranslog$] logrithmierte Mittelwert der
		Transmissionswärmeleistung in $kW$
	\item[$\pmehr$] Mehrbedarf am Tag in $kW$

\end{description}
\vspace{0.5cm}

Die Zeit $\tau_{krit}$ ist abhängig vom Anstieg der Temperaturen und dieser
wiederum von den eindringenden Wärmelasten.

Um den Temperaturausgleich in den Lebensmitteln im Algorithmus zu
berücksichtigen, werden deshalb die zu- und abgeführten Wärmeenergiemengen bei
der Berechnung der Temperatur für jeden Zeitschritt stets mit dem Faktor 0,8
multipliziert.  Die Gleichung zur stündlichen Berechnung der aktuellen
Temperatur ist damit:

\begin{equation}
	t(i+1) = 0.8 \cdot \frac{Q_v - Q_{ab}}{m \cdot c} + t(i)
\label{tns}
\end{equation}

\begin{description}[\dth]

	\item[$t$] Temperatur in $^{\circ} C$
	\item[$Q_v$] eindringende Verlustwärmemenge in $kJ$
	\item[$Q_{ab}$] abführende Wärmemenge in $kJ$

\end{description}
\vspace{0.5cm}

wobei $Q_v$ die aktuell eindringende Wärmeenergie und $Q_ab$ die abgeführte
Wärmeenergie ist.
